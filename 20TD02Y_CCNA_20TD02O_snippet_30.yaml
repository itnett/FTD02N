apiVersion: v1
   kind: Service
   metadata:
     name: simulated-sensors-service
     labels:
       app: simulated-sensors-service
   spec:
     clusterIP: None
     selector:
       app: simulated-sensors-service
   ---
   apiVersion: apps/v1
   kind: StatefulSet
   metadata:
     name: simulated-sensors
   spec:
     replicas: 5
     serviceName: "simulated-sensors-service"
     selector:
       matchLabels:
         app: sim-sensor
     template:
       metadata:
         labels:
           app: sim-sensor
       spec:
         volumes:
           - name: secrets
             secret:
               secretName: sim-sensor-credentials      
         containers:
           - name: test-container
             image: clumsypilot/iotsimulator
             envFrom:
               - configMapRef:
                   name: sim-sensor-settings
             volumeMounts:
               - name: secrets
                 mountPath: /secrets
                 readOnly: true          
             env:
               - name: POD_NAME
                 valueFrom:
                   fieldRef:
                     fieldPath: metadata.name